<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Calendly performance preconnects -->
  <link rel="dns-prefetch" href="https://assets.calendly.com">
  <link rel="dns-prefetch" href="https://calendly.com">
  <link rel="preconnect" href="https://assets.calendly.com" crossorigin>
  <link rel="preconnect" href="https://calendly.com" crossorigin>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cosmic Physics ‚Äî Tutoring</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <!-- Calendly CSS: preload then apply -->
  <link rel="preload" href="https://assets.calendly.com/assets/external/widget.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet"></noscript>

  <style>
    /* iOS scrolling safety */
    html,body{
      margin:0;padding:0;
      height:auto !important;
      min-height:100% !important;
      overflow-y:auto !important;
      -webkit-overflow-scrolling:touch;
    }

    body{
      font-family:'Press Start 2P', cursive;
      color:#00ffcc;
      background:
        radial-gradient(circle at 30% 20%, #002 0%, transparent 40%),
        radial-gradient(circle at 70% 10%, #113 0%, transparent 45%),
        radial-gradient(circle at 50% 90%, #001 0%, transparent 50%),
        #000;
      image-rendering: pixelated;
    }

    /* prevent decorative layers from blocking touch */
    .stars, .stars:before, .stars:after{
      position:fixed; inset:0; content:""; z-index:-1;
      background:transparent; pointer-events:none;
      box-shadow:
        10vw 10vh #fff, 20vw 30vh #0ff, 35vw 20vh #ff0, 50vw 15vh #f0f,
        65vw 25vh #0ff, 80vw 10vh #fff, 15vw 60vh #ff0, 30vw 70vh #f0f,
        45vw 65vh #fff, 60vw 50vh #0ff, 75vw 40vh #ff0, 90vw 55vh #f0f,
        5vw 85vh #fff, 25vw 90vh #0ff, 55vw 85vh #ff0, 85vw 80vh #f0f;
      opacity:.7;
    }
    .stars:before{ transform:scale(1.4); opacity:.5 }
    .stars:after{ transform:scale(.7); opacity:.9 }

    header{
      text-align:center;
      padding:26px 10px 18px;
      background:linear-gradient(90deg, #ff00cc, #3333ff);
      border-bottom:4px double #00ffff;
      text-shadow:2px 2px #000;
      box-shadow:0 0 18px #00ffff;
      position:relative;
      cursor:pointer;
    }
    header h1{ margin:0; font-size:22px; color:yellow; }
    .blink{ animation:blink 1s steps(2) infinite }
    @keyframes blink{ 50% { opacity:.35 } }
    .tag{ margin:8px 0 0; font-size:12px; color:#fff; }

    nav{
      text-align:center; padding:10px 0; background:#111;
      border-top:2px solid #00ffff; border-bottom:2px solid #00ffff;
    }
    nav a{ color:#00ffcc; text-decoration:none; margin:0 12px; font-size:12px; }
    nav a:hover{ color:yellow; text-shadow:0 0 10px yellow }

    .marq{
      background:#001a1a; border-top:3px dashed #0ff; border-bottom:3px dashed #0ff;
      color:#0ff; font-size:12px; padding:4px 0;
    }

    main{ max-width:900px; margin:22px auto; padding:0 12px }
    .panel{
      background: rgba(0,0,40,.85); border:3px ridge #00ffff; box-shadow:0 0 18px #00ffff;
      padding:20px; margin:22px 0;
    }
    .panel h2{ margin:0 0 12px; color:#fffb91; text-shadow:2px 2px #000 }

    .btn{ display:inline-block; padding:10px 16px; margin:10px 6px 0;
      background:linear-gradient(90deg, yellow, #00ffcc); color:#000; text-decoration:none;
      border:4px outset #00ffff; box-shadow:0 0 10px #00ffff; font-size:12px; }
    .btn:hover{ filter:brightness(1.1) }

    table{ width:100%; border-collapse:collapse; font-size:12px; background:#02023a;
      border:4px groove #00ffff; box-shadow:0 0 12px #00ffff; }
    th,td{ padding:10px; border:2px dashed #00ffff; color:#ccfff6; text-align:left }
    th{ background:#0a0a66; color:#fffb91 }

    .sticker-row{ display:flex; gap:14px; flex-wrap:wrap; justify-content:center; margin:10px 0 0 }
    .sticker{ width:96px; height:96px; filter:drop-shadow(0 0 10px #0ff) }

    .badge{ position:absolute; right:8px; top:8px; display:flex; align-items:center; gap:6px;
      background:#000; border:3px dashed yellow; color:yellow; padding:6px 10px; font-size:10px;
      box-shadow:0 0 10px #ff0; }

    .counter-wrap{ display:flex; align-items:center; justify-content:center; gap:8px; margin-top:8px; }
    .counter-label{ font-size:10px; color:#fffb91 }
    .counter{ display:inline-flex; gap:2px; padding:4px 6px; background:#001a1a; border:3px inset #00ffff; box-shadow:0 0 10px #00ffff; }
    .digit{ min-width:12px; padding:4px 2px; background:linear-gradient(#eaffff, #77ffff); color:#002; border:2px outset #aaffff; border-radius:2px; font-size:12px; }

    footer{ text-align:center; padding:18px; font-size:10px; color:#00cccc; border-top:2px solid #00ffff; margin-top:28px; }

    .apple{ position:fixed; top:-80px; left:50%; transform:translateX(-50%); width:48px; height:48px; pointer-events:none; filter:drop-shadow(0 0 10px #ff0); z-index:1000; }
    .drop{ animation: fall 1.2s cubic-bezier(.2,.8,.2,1) forwards, wobble .7s .95s ease-out 1; }
    @keyframes fall{ 0%{ transform:translate(-50%, -80px) rotate(0deg) } 70%{ transform:translate(-50%, calc(100vh - 180px)) rotate(20deg) } 85%{ transform:translate(-50%, calc(100vh - 210px)) rotate(-10deg) } 100%{ transform:translate(-50%, calc(100vh - 180px)) rotate(6deg) } }
    @keyframes wobble{ 0%{ transform:translate(-50%, calc(100vh - 180px)) rotate(6deg) } 50%{ transform:translate(-50%, calc(100vh - 175px)) rotate(-6deg) } 100%{ transform:translate(-50%, calc(100vh - 180px)) rotate(3deg) } }

    /* Ensure Calendly overlays never trap touch scrolling */
    .calendly-overlay, .calendly-popup, .calendly-popup-close { pointer-events:auto !important; }
  </style>
</head>

<body>
  <div class="stars"></div>

  <header id="headerClick">
    <div class="badge">
      <svg width="18" height="18" viewBox="0 0 64 64" aria-hidden="true">
        <path d="M32 6l12 26H20L32 6z" fill="#ffa500" stroke="#000" stroke-width="2"/>
        <rect x="10" y="40" width="44" height="6" fill="#ffd166" stroke="#000" stroke-width="2"/>
        <rect x="6" y="48" width="52" height="8" fill="#ffa500" stroke="#000" stroke-width="2"/>
      </svg>
      UNDER CONSTRUCTION
    </div>
    <h1 class="blink">‚ú® Cosmic Physics ‚Äî Tutoring ‚ú®</h1>
    <div class="tag">‚ÄúUnlock the Universe ‚Äî One Equation at a Time‚Äù</div>
    <div class="counter-wrap" aria-live="polite">
      <span class="counter-label">You are visitor #</span>
      <span id="counter" class="counter" title="Totally real, very official 90s hit counter"></span>
    </div>
  </header>

  <div class="marq">
    <marquee behavior="scroll" direction="left" scrollamount="5">
      üöÄ NOW BOOKING ‚Ä¢ AP PHYSICS ‚Ä¢ COLLEGE PHYSICS ‚Ä¢ CONCEPTUAL PHYSICS ‚Ä¢ ONLINE ‚Ä¢ SLIDING SCALE ‚Ä¢ Email: jeff@cosmicphysics.org
    </marquee>
  </div>

  <nav>
    <a href="index.html">Home</a>
    <a href="bigideas.html">Big Ideas</a>
    <a href="#contact">Contact</a>
  </nav>

  <main>
    <section id="about" class="panel">
      <h2>ü™ê About</h2>
      <p>I‚Äôm Jeff ‚Äî a physics & philosophy grad helping students crack mechanics, E&M, waves, optics, and modern physics. The vibe is cheesy retro web, but the tutoring is deadly serious.</p>
      <div class="sticker-row">
        <svg class="sticker" viewBox="0 0 200 200" role="img" aria-label="Atom">
          <defs><radialGradient id="core" cx="50%" cy="50%" r="60%">
            <stop offset="0%" stop-color="#fff"/><stop offset="100%" stop-color="#b8f2ff"/></radialGradient></defs>
          <circle cx="100" cy="100" r="12" fill="url(#core)"/>
          <g fill="none" stroke="#0ff" stroke-width="3">
            <ellipse cx="100" cy="100" rx="70" ry="28"/>
            <ellipse cx="100" cy="100" rx="70" ry="28" transform="rotate(60 100 100)"/>
            <ellipse cx="100" cy="100" rx="70" ry="28" transform="rotate(120 100 100)"/>
          </g>
        </svg>
        <svg class="sticker" viewBox="0 0 96 96" role="img" aria-label="Test tube">
          <rect x="36" y="8" width="24" height="70" rx="10" fill="#003" stroke="#0ff" stroke-width="3"/>
          <rect x="39" y="12" width="18" height="60" rx="8" fill="#0ff4"/>
          <circle cx="48" cy="68" r="4" fill="#0ff"/>
          <circle cx="48" cy="56" r="3" fill="#0ff"/>
          <circle cx="48" cy="44" r="2" fill="#0ff"/>
        </svg>
        <svg class="sticker" viewBox="0 0 96 96" role="img" aria-label="Rocket">
          <path d="M48 8c12 10 18 24 18 40 0 10-3 20-8 26H38c-5-6-8-16-8-26 0-16 6-30 18-40z" fill="#f0f" stroke="#0ff" stroke-width="3"/>
          <circle cx="48" cy="36" r="8" fill="#0ff"/>
          <path d="M38 74h20l-6 12H44z" fill="orange" stroke="#000" stroke-width="2"/>
        </svg>
        <svg class="sticker" viewBox="0 0 120 96" role="img" aria-label="Circuit">
          <rect x="8" y="8" width="104" height="80" rx="10" fill="#02022a" stroke="#0ff" stroke-width="3"/>
          <path d="M20 28h20l10-10 10 10h30" stroke="#ff0" stroke-width="3" fill="none"/>
          <circle cx="20" cy="28" r="4" fill="#0ff"/>
          <circle cx="50" cy="18" r="4" fill="#0ff"/>
          <circle cx="60" cy="28" r="4" fill="#0ff"/>
          <circle cx="90" cy="28" r="4" fill="#0ff"/>
        </svg>
      </div>
    </section>

    <section id="sessions" class="panel">
      <h2>‚ö° Sessions</h2>
      <table>
        <tr><th>Track</th><th>Topics</th><th>Format</th></tr>
        <tr><td>Physics 1</td><td>Kinematics, Newton‚Äôs Laws, Energy, Momentum, Rotation</td><td>Zoom / In-person</td></tr>
        <tr><td>Physics 2</td><td>Fluids, Thermo, E&M, Optics, Modern</td><td>Zoom / In-person</td></tr>
        <tr><td>Physics with Calculus I (Mechanics)</td><td>For engineering, physics, and premed students mastering motion, energy, and rotation</td><td>Zoom/In-person</td></tr>
        <tr><td>Physics with Calculus II (Electricty & Magnetism)</td><td>Master fields, flux, and Maxwell‚Äôs equations with clarity and confidence.</td><td>Zoom / In-person</td></tr>
        <tr><td>AP Prep</td><td>Unit review, FRQs, calculator fluency, test strategy</td><td>Intensive or weekly</td></tr>
        <tr><td>MCAT Physics Prep</td><td>Physics review,problem types,testing strategy</td><td>Intensive or weekly</td></tr>
        <tr><td>Conceptual</td><td>Relativity, quantum ideas, nonlinear dynamics/chaos, problem-solving labs</td><td>Weekly or drop-in</td></tr>
      </table>

      <!-- Book button (opens popup) -->
      <a id="book-calendly" class="btn" href="#">Book with Calendly</a>
    </section>

    <!-- Removed inline Calendly calendar to speed load -->

    <section id="contact" class="panel">
      <h2>üíæ Contact</h2>

      <!-- Contact form handled by Formspree -->
      <form
        action="https://formspree.io/f/mnnopyae"
        method="POST"
        style="display:flex;flex-direction:column;gap:10px;max-width:420px;margin:auto;"
      >
        <label style="font-size:10px;color:#fffb91;">
          Name:
          <input type="text" name="name" required
                 style="width:100%;padding:8px;border:2px solid #00ffff;background:#001;color:#00ffcc;
                        font-family:'Press Start 2P',cursive;font-size:10px;">
        </label>

        <label style="font-size:10px;color:#fffb91;">
          Email:
          <input type="email" name="_replyto" required
                 style="width:100%;padding:8px;border:2px solid #00ffff;background:#001;color:#00ffcc;
                        font-family:'Press Start 2P',cursive;font-size:10px;">
        </label>

        <label style="font-size:10px;color:#fffb91;">
          Message:
          <textarea name="message" rows="4" required
                    style="width:100%;padding:8px;border:2px solid #00ffff;background:#001;color:#00ffcc;
                           font-family:'Press Start 2P',cursive;font-size:10px;"></textarea>
        </label>

        <button type="submit"
                style="padding:10px;background:linear-gradient(90deg, yellow, #00ffcc);
                       border:4px outset #00ffff;box-shadow:0 0 10px #00ffff;cursor:pointer;
                       font-family:'Press Start 2P',cursive;font-size:10px;">
          SEND MESSAGE
        </button>
      </form>
    </section>
  </main>

  <footer>¬© 2025 Cosmic Physics ‚Ä¢ Made with üíæ and starlight</footer>

  <!-- Calendly widget JS -->
  <script src="https://assets.calendly.com/assets/external/widget.js" async></script>

  <script>
    /* Smooth scroll */
    document.querySelectorAll('nav a').forEach(a => {
      a.addEventListener('click', e => {
        const href = a.getAttribute('href');
        if(href && href.startsWith('#')){
          e.preventDefault();
          document.querySelector(href)?.scrollIntoView({behavior:'smooth'});
        }
      });
    });

    /* Fake Hit Counter */
    (function(){
      const baseKey='jpt_counter_base',countKey='jpt_counter_count';
      let base=parseInt(localStorage.getItem(baseKey),10);
      if(isNaN(base)){ base=Math.floor(3000+Math.random()*6000); localStorage.setItem(baseKey,String(base)); }
      let count=parseInt(localStorage.getItem(countKey),10);
      if(isNaN(count))count=0;
      count += 1 + Math.floor(Math.random()*3);
      localStorage.setItem(countKey, String(count));
      const total=base+count;
      const digits=String(total).padStart(6,'0').split('');
      const el=document.getElementById('counter');
      el.innerHTML='';
      digits.forEach(d => {
        const span=document.createElement('span'); span.className='digit'; span.textContent=d; el.appendChild(span);
      });
    })();

    /* Newton's Apple Easter Egg */
    const header = document.getElementById('headerClick');
    header.addEventListener('click', () => {
      const n = 1 + Math.floor(Math.random()*3);
      for(let i=0;i<n;i++){ spawnApple( (i*200) + Math.random()*120 ); }
    });
    function spawnApple(delayMs){
      const apple = document.createElement('div');
      apple.className = 'apple';
      apple.style.left = (10 + Math.random()*80) + 'vw';
      apple.style.animationDelay = (delayMs/1000)+'s';
      apple.innerHTML = `
        <svg viewBox="0 0 64 64" width="48" height="48" aria-hidden="true">
          <defs><radialGradient id="g" cx="50%" cy="40%" r="60%">
            <stop offset="0%" stop-color="#fff5f5"/><stop offset="100%" stop-color="#ff3b3b"/></radialGradient></defs>
          <path d="M32 14c-6 0-10 4-12 8-5 10 0 22 12 28 12-6 17-18 12-28-2-4-6-8-12-8z" fill="url(#g)" stroke="#600" stroke-width="2"/>
          <path d="M32 14c2-6 7-8 12-8-2 6-7 8-12 8z" fill="#7f4" stroke="#284" stroke-width="2"/>
          <rect x="30" y="10" width="4" height="8" rx="2" fill="#531"/>
          <path d="M36 10c8 0 12 4 12 8-8 0-12-4-12-8z" fill="#7f4" stroke="#284" stroke-width="2"/>
        </svg>
      `;
      document.body.appendChild(apple);
      requestAnimationFrame(()=>{ apple.classList.add('drop'); });
      apple.addEventListener('animationend', ()=>{ setTimeout(()=>apple.remove(), 700); });
    }

    /* Book button ‚Üí Calendly popup */
    document.getElementById('book-calendly')?.addEventListener('click', function(e){
      e.preventDefault();
      Calendly.initPopupWidget({
        url: 'https://calendly.com/jeffnechleba?hide_gdpr_banner=1&background_color=000000&text_color=00ffcc&primary_color=ffff00'
      });
      return false;
    });

    /* Floating Calendly badge ‚Äî keep original neon scheme */
    window.addEventListener('load', function() {
      function initBadge() {
        Calendly.initBadgeWidget({
          url: 'https://calendly.com/jeffnechleba/?hide_event_type_details=1&hide_gdpr_banner=1&background_color=000000&text_color=00ffcc&primary_color=ffff00',
          text: 'üìÖ Book a Session with Jeff',
          color: '#00ffcc',
          textColor: '#000000',
          branding: false
        });
      }
      if (window.Calendly && Calendly.initBadgeWidget) {
        initBadge();
      } else {
        const t = setInterval(() => {
          if (window.Calendly && Calendly.initBadgeWidget) {
            clearInterval(t);
            initBadge();
          }
        }, 250);
        setTimeout(() => clearInterval(t), 6000);
      }
    });

    /* iOS safety: disable popup warm-up (it can freeze scroll) */
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent)
      || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);

    if (!isIOS) {
      // optional warm-up for non-iOS to speed first click
      const warmCalendly = () => {
        if (window.__calWarm) return;
        window.__calWarm = true;
        try {
          Calendly?.initPopupWidget?.({
            url: 'https://calendly.com/jeffnechleba?hide_gdpr_banner=1'
          });
          Calendly?.closePopupWidget?.(); // close immediately; just warming connections
        } catch(e){}
      };
      window.addEventListener('mousemove', warmCalendly, { once: true });
      window.addEventListener('scroll', warmCalendly, { once: true });
    }

    // Failsafe cleanup: remove any stray overlay that could trap touch-scroll
    function nukeCalendlyOverlay(){
      document.querySelectorAll('.calendly-overlay, .calendly-popup').forEach(el => el.remove());
    }
    setTimeout(nukeCalendlyOverlay, 2000);
  </script>
</body>
</html>
